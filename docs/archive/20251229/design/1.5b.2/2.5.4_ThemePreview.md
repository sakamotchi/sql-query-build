# タスク1.5b.2.5.4: ThemePreview.vue作成

**サブフェーズ**: 2.5 接続フォームページ
**工数**: 1.5時間
**優先度**: 低
**依存関係**: 2.1.1 (useEnvironment), 2.1.3 (型定義)

---

## 目的

テーマプレビューコンポーネントを実装（接続フォームで環境カラーをプレビュー）

---

## 実装内容

### ファイル作成: `app/components/connection/ThemePreview.vue`

```vue
<script setup lang="ts">
import type { Environment } from '~/types'

const props = defineProps<{
  environment: Environment
  customColor?: {
    primary: string
    background: string
  }
}>()

const { environmentColors } = useEnvironment()

/**
 * 実際に適用されるカラー
 */
const previewColors = computed(() => {
  if (props.customColor) {
    return {
      primary: props.customColor.primary,
      bg: props.customColor.background,
      border: props.customColor.primary
    }
  }
  return environmentColors.value
})
</script>

<template>
  <div class="space-y-4">
    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 block">
      テーマプレビュー
    </label>

    <!-- ヘッダープレビュー -->
    <div
      class="border-b-4 rounded-t-lg shadow-md overflow-hidden"
      :style="{
        borderColor: previewColors.primary,
        backgroundColor: previewColors.bg
      }"
    >
      <div class="px-4 py-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <span class="text-lg font-bold text-gray-900 dark:text-white">
              SQL Query Build
            </span>
            <UBadge
              :style="{
                backgroundColor: previewColors.primary,
                color: 'white'
              }"
              size="sm"
            >
              {{ environment }} 環境
            </UBadge>
          </div>
          <UIcon name="i-heroicons-sun" class="text-gray-600" />
        </div>
      </div>
    </div>

    <!-- カードプレビュー -->
    <UCard class="relative">
      <div
        class="absolute top-0 left-0 right-0 h-1"
        :style="{ backgroundColor: previewColors.primary }"
      />

      <div class="pt-2 space-y-3">
        <div class="flex items-center gap-2">
          <UBadge
            :style="{
              backgroundColor: previewColors.primary,
              color: 'white'
            }"
            size="xs"
          >
            {{ environment }}
          </UBadge>
          <span class="text-sm font-semibold">接続名サンプル</span>
        </div>

        <div class="text-sm text-gray-600 dark:text-gray-400">
          <div>ホスト: localhost:3306</div>
          <div>データベース: sample_db</div>
        </div>

        <div class="pt-2 border-t border-gray-200 dark:border-gray-700">
          <UButton
            :style="{
              backgroundColor: previewColors.primary,
              borderColor: previewColors.primary
            }"
            size="sm"
            block
          >
            接続
          </UButton>
        </div>
      </div>
    </UCard>

    <!-- カラー情報 -->
    <div class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
      <div class="flex items-center gap-2">
        <div
          class="w-4 h-4 rounded border border-gray-300"
          :style="{ backgroundColor: previewColors.primary }"
        />
        <span>プライマリ: {{ previewColors.primary }}</span>
      </div>
      <div class="flex items-center gap-2">
        <div
          class="w-4 h-4 rounded border border-gray-300"
          :style="{ backgroundColor: previewColors.bg }"
        />
        <span>背景: {{ previewColors.bg }}</span>
      </div>
    </div>
  </div>
</template>
```

---

## 確認事項

- [ ] コンポーネントが作成されたか
- [ ] プレビューが正しく表示されるか
- [ ] カスタムカラーが適用されるか
- [ ] デフォルト環境カラーが適用されるか
- [ ] リアルタイムでプレビューが更新されるか

---

## 成果物

- `app/components/connection/ThemePreview.vue`

---

## Props仕様

| Prop | 型 | 必須 | 説明 |
|------|---|------|------|
| `environment` | `Environment` | ✓ | 環境タイプ |
| `customColor` | `{ primary: string, background: string }` | - | カスタムカラー（指定時はこちらを優先） |

---

## プレビュー内容

### 1. ヘッダープレビュー
- アプリ名
- 環境バッジ
- テーマ切り替えアイコン
- 環境カラーのボーダー

### 2. カードプレビュー
- 環境インジケーター（上部）
- 環境バッジ
- 接続情報
- 接続ボタン（環境カラー）

### 3. カラー情報
- プライマリカラーのHEXコード表示
- 背景カラーのHEXコード表示

---

## Computed Properties

| 名称 | 説明 |
|------|------|
| `previewColors` | カスタムカラーまたはデフォルト環境カラーを返す |

---

## 使用例

### デフォルト環境カラー

```vue
<ThemePreview :environment="form.environment" />
```

### カスタムカラー

```vue
<ThemePreview
  :environment="form.environment"
  :custom-color="{
    primary: '#9C27B0',
    background: '#F3E5F5'
  }"
/>
```

---

## デザイン要件

- 実際のUIに近いプレビュー
- カラー変更がリアルタイムで反映
- コンパクトで分かりやすい表示

---

## 次のタスク

→ [README.md作成](README.md) - 索引ファイルの作成
