# タスク1.5b.2.3.4: EnvironmentWarningBanner.vue作成

**サブフェーズ**: 2.3 共通コンポーネント
**工数**: 2時間
**優先度**: 高
**依存関係**: 2.1.1 (useEnvironment), 2.1.3 (型定義)

---

## 目的

環境警告バナーコンポーネントを実装（本番環境での警告表示など）

---

## 実装内容

### ファイル作成: `app/components/common/EnvironmentWarningBanner.vue`

```vue
<script setup lang="ts">
import type { Environment } from '~/types'

const props = defineProps<{
  environment: Environment
  dismissible?: boolean
}>()

const { environmentLabel } = useEnvironment()

const isDismissed = ref(false)

/**
 * 環境別の警告メッセージ
 */
const warningMessage = computed(() => {
  const messages: Record<Environment, string> = {
    development: '開発環境に接続しています',
    test: 'テスト環境に接続しています',
    staging: 'ステージング環境に接続しています。本番データではありません。',
    production: '⚠️ 本番環境に接続しています。操作には十分注意してください。'
  }
  return messages[props.environment]
})

/**
 * 環境別のアラートカラー
 */
const alertColor = computed(() => {
  const colors: Record<Environment, string> = {
    development: 'green',
    test: 'blue',
    staging: 'amber',
    production: 'red'
  }
  return colors[props.environment]
})

/**
 * バナーを非表示にする
 */
const dismiss = () => {
  isDismissed.value = true
}
</script>

<template>
  <UAlert
    v-if="!isDismissed"
    :color="alertColor"
    :title="environmentLabel + '環境'"
    :description="warningMessage"
    :close-button="dismissible ? { color: 'white' } : undefined"
    variant="solid"
    @close="dismiss"
  >
    <template #icon>
      <UIcon
        :name="environment === 'production' ? 'i-heroicons-exclamation-triangle' : 'i-heroicons-information-circle'"
        class="w-5 h-5"
      />
    </template>
  </UAlert>
</template>
```

---

## 確認事項

- [ ] コンポーネントが作成されたか
- [ ] 環境別の警告メッセージが表示されるか
- [ ] 本番環境で強調表示されるか
- [ ] 閉じるボタンが動作するか（dismissible=trueの場合）
- [ ] props型定義が正しいか

---

## 成果物

- `app/components/common/EnvironmentWarningBanner.vue`

---

## Props仕様

| Prop | 型 | 必須 | デフォルト | 説明 |
|------|---|------|-----------|------|
| `environment` | `Environment` | ✓ | - | 環境タイプ |
| `dismissible` | `boolean` | - | `false` | 閉じるボタン表示 |

---

## 環境別メッセージ

| 環境 | メッセージ | アイコン | 重要度 |
|------|-----------|---------|--------|
| development | 開発環境に接続しています | information-circle | 低 |
| test | テスト環境に接続しています | information-circle | 低 |
| staging | ステージング環境に接続しています。本番データではありません。 | information-circle | 中 |
| production | ⚠️ 本番環境に接続しています。操作には十分注意してください。 | exclamation-triangle | 高 |

---

## 使用例

```vue
<!-- ページ上部に警告バナー表示 -->
<EnvironmentWarningBanner
  :environment="currentEnvironment"
  :dismissible="true"
/>
```

---

## UX考慮事項

- 本番環境では閉じても毎回表示を推奨
- ステージング以下は一度閉じたら非表示でOK
- 視覚的に目立つデザイン（特に本番環境）

---

## 次のタスク

→ [2.4.1: pages/index.vue作成](2.4.1_launcherPage.md)
