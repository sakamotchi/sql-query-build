# タスクリスト: 結果表示UI

## 前提条件

- [ ] Phase 2.1 クエリ実行基盤（Rust）が完成していること

## タスク一覧

### 2.2.1 QueryResult型定義（フロントエンド）

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.1.1 | QueryExecuteResult型定義 | 📝 未着手 | - |
| 2.2.1.2 | QueryResultColumn型定義 | 📝 未着手 | - |
| 2.2.1.3 | QueryResultRow型定義 | 📝 未着手 | - |
| 2.2.1.4 | QueryValue型定義 | 📝 未着手 | - |
| 2.2.1.5 | QueryExecuteRequest型定義 | 📝 未着手 | - |
| 2.2.1.6 | QueryExecuteResponse型定義 | 📝 未着手 | - |
| 2.2.1.7 | QueryExecuteError型定義 | 📝 未着手 | - |

**成果物**: `app/types/query-result.ts`

### 2.2.2 queryApi.executeQuery実装

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.2.1 | executeQuery関数実装 | 📝 未着手 | 2.2.1 |
| 2.2.2.2 | cancelQuery関数実装 | 📝 未着手 | 2.2.1 |
| 2.2.2.3 | エラーハンドリング | 📝 未着手 | 2.2.2.1 |

**成果物**: `app/api/query.ts` 追加

### 2.2.3 ResultTable.vue コンポーネント

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.3.1 | コンポーネント作成 | 📝 未着手 | 2.2.1 |
| 2.2.3.2 | テーブルレイアウト実装 | 📝 未着手 | 2.2.3.1 |
| 2.2.3.3 | スティッキーヘッダー実装 | 📝 未着手 | 2.2.3.2 |
| 2.2.3.4 | 空結果表示 | 📝 未着手 | 2.2.3.2 |

**成果物**: `app/components/query-builder/result/ResultTable.vue`

### 2.2.4 ResultColumnHeader.vue

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.4.1 | コンポーネント作成 | 📝 未着手 | 2.2.1 |
| 2.2.4.2 | カラム名表示 | 📝 未着手 | 2.2.4.1 |
| 2.2.4.3 | データ型表示 | 📝 未着手 | 2.2.4.2 |
| 2.2.4.4 | データ型表示名マッピング | 📝 未着手 | 2.2.4.3 |

**成果物**: `app/components/query-builder/result/ResultColumnHeader.vue`

### 2.2.5 ResultRow.vue

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.5.1 | コンポーネント作成 | 📝 未着手 | 2.2.1 |
| 2.2.5.2 | 行データ表示 | 📝 未着手 | 2.2.5.1 |
| 2.2.5.3 | NULL値スタイル実装 | 📝 未着手 | 2.2.5.2 |
| 2.2.5.4 | 値フォーマット関数 | 📝 未着手 | 2.2.5.2 |
| 2.2.5.5 | ホバースタイル | 📝 未着手 | 2.2.5.2 |

**成果物**: `app/components/query-builder/result/ResultRow.vue`

### 2.2.6 Pagination.vue

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.6.1 | コンポーネント作成 | 📝 未着手 | - |
| 2.2.6.2 | ページ計算ロジック | 📝 未着手 | 2.2.6.1 |
| 2.2.6.3 | ページサイズ選択UI | 📝 未着手 | 2.2.6.1 |
| 2.2.6.4 | ページナビゲーションUI | 📝 未着手 | 2.2.6.1 |
| 2.2.6.5 | 表示件数情報 | 📝 未着手 | 2.2.6.2 |
| 2.2.6.6 | 先頭/末尾ジャンプ | 📝 未着手 | 2.2.6.4 |

**成果物**: `app/components/query-builder/result/ResultPagination.vue`

### 2.2.7 ResultPanel.vue拡張

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.7.1 | ストア連携追加 | 📝 未着手 | 2.2.8 |
| 2.2.7.2 | ローディング表示 | 📝 未着手 | 2.2.7.1 |
| 2.2.7.3 | 結果なし表示 | 📝 未着手 | 2.2.7.1 |
| 2.2.7.4 | ResultTable統合 | 📝 未着手 | 2.2.3, 2.2.7.1 |
| 2.2.7.5 | ResultPagination統合 | 📝 未着手 | 2.2.6, 2.2.7.1 |
| 2.2.7.6 | 実行情報表示（行数、時間） | 📝 未着手 | 2.2.7.4 |
| 2.2.7.7 | エラー表示 | 📝 未着手 | 2.2.7.1 |

**成果物**: `app/components/query-builder/ResultPanel.vue`

### 2.2.8 query-builderストア executeQuery実装

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.8.1 | 状態追加（queryResult, currentPage, pageSize） | 📝 未着手 | 2.2.1 |
| 2.2.8.2 | executeQueryアクション実装 | 📝 未着手 | 2.2.2, 2.2.8.1 |
| 2.2.8.3 | cancelQueryアクション実装 | 📝 未着手 | 2.2.2, 2.2.8.1 |
| 2.2.8.4 | paginatedRowsゲッター実装 | 📝 未着手 | 2.2.8.1 |
| 2.2.8.5 | setCurrentPage/setPageSizeアクション | 📝 未着手 | 2.2.8.1 |
| 2.2.8.6 | clearResultアクション | 📝 未着手 | 2.2.8.1 |
| 2.2.8.7 | エラーハンドリング | 📝 未着手 | 2.2.8.2 |

**成果物**: `app/stores/query-builder.ts` 拡張

### 2.2.9 テストコード

| タスクID | タスク名 | 状態 | 依存 |
|---------|---------|------|------|
| 2.2.9.1 | ResultTable.spec.ts | 📝 未着手 | 2.2.3 |
| 2.2.9.2 | ResultColumnHeader.spec.ts | 📝 未着手 | 2.2.4 |
| 2.2.9.3 | ResultRow.spec.ts | 📝 未着手 | 2.2.5 |
| 2.2.9.4 | ResultPagination.spec.ts | 📝 未着手 | 2.2.6 |
| 2.2.9.5 | query-builder store テスト追加 | 📝 未着手 | 2.2.8 |

**成果物**: `app/components/query-builder/result/__tests__/*.spec.ts`

## 進捗サマリー

| フェーズ | 完了 | 進行中 | 未着手 | 合計 |
|---------|------|--------|--------|------|
| 2.2.1 型定義 | 0 | 0 | 7 | 7 |
| 2.2.2 API | 0 | 0 | 3 | 3 |
| 2.2.3 ResultTable | 0 | 0 | 4 | 4 |
| 2.2.4 ColumnHeader | 0 | 0 | 4 | 4 |
| 2.2.5 ResultRow | 0 | 0 | 5 | 5 |
| 2.2.6 Pagination | 0 | 0 | 6 | 6 |
| 2.2.7 ResultPanel | 0 | 0 | 7 | 7 |
| 2.2.8 Store | 0 | 0 | 7 | 7 |
| 2.2.9 テスト | 0 | 0 | 5 | 5 |
| **合計** | **0** | **0** | **48** | **48** |

## 推奨実装順序

1. **2.2.1** 型定義 - 全体の基盤となる
2. **2.2.2** API実装 - バックエンドとの連携
3. **2.2.8** ストア実装 - 状態管理
4. **2.2.3-2.2.5** 表示コンポーネント - 並行実装可能
5. **2.2.6** Pagination - 独立して実装可能
6. **2.2.7** ResultPanel統合 - 全体をまとめる
7. **2.2.9** テストコード - 実装後に追加
