# 設計書一覧

このディレクトリには、SQLエディタプロジェクトの詳細設計書が格納されています。

---

## 📂 ディレクトリ構成

```
docs/design/
├── README.md                                # このファイル
├── 1.2.1_file_storage_module.md             # ファイルストレージモジュール実装
├── 1.2.2_encryption_utility.md              # 暗号化ユーティリティ実装
├── 1.2.3_master_key_management.md           # マスターキー管理実装
├── 1.2.4_connection_data_model.md           # 接続情報データモデル定義
├── 1.2.5_persistence_layer_test_strategy.md # データ永続化層のテスト作成
├── 1.3.1_launcher_ui_design.md              # 起動画面(ランチャー)UI実装
├── 1.3.2_connection_card_design.md          # 接続カードコンポーネント作成
├── 1.3.3_connection_form_design.md          # 接続設定フォームUI実装
├── 1.3.4_connection_crud_design.md          # 接続CRUD機能実装(Rust)
├── 1.3.5_connection_store_design.md         # フロントエンド接続管理Store実装
├── 1.3.6_tauri_ipc_design.md                # Tauri IPC通信実装
├── 1.3.7_connection_test_design.md          # 接続テスト機能実装
├── 1.3.8_search_filter_design.md            # 検索・フィルター機能実装
├── 1.4.1_vuetify_theme_definition.md        # Vuetifyテーマ定義作成
├── 1.4.2_theme_switcher.md                  # テーマ切り替え機能実装
├── 1.4.3_environment_color_settings_ui.md   # 環境色設定UI実装
├── 1.4.4_environment_header_component.md    # 環境識別ヘッダーコンポーネント
├── 1.4.5_theme_store.md                     # テーマStore実装
└── 1.4.6_theme_preview.md                   # テーマプレビュー機能
```

---

## 📋 WBS 1.3: 接続管理機能 設計書一覧

### 1.3.1 起動画面(ランチャー)UI実装

**ファイル**: [1.3.1_launcher_ui_design.md](./1.3.1_launcher_ui_design.md)

**概要**: アプリケーション起動時に表示される、データベース接続の一覧と管理を行うランチャー画面のUI設計

**主要コンポーネント**:
- LauncherPage.vue (メインページ)
- LauncherAppBar.vue (ヘッダー)
- LauncherToolbar.vue (ツールバー)
- ConnectionList.vue (接続リスト)

**工数**: 2日

---

### 1.3.2 接続カードコンポーネント作成

**ファイル**: [1.3.2_connection_card_design.md](./1.3.2_connection_card_design.md)

**概要**: ランチャー画面で各データベース接続を視覚的に表示するカードコンポーネントの設計

**主要機能**:
- 環境別の色分け表示
- 接続情報の表示
- 各種操作メニュー(編集/複製/削除)
- ホバー効果とインタラクション

**工数**: 1日

---

### 1.3.3 接続設定フォームUI実装

**ファイル**: [1.3.3_connection_form_design.md](./1.3.3_connection_form_design.md)

**概要**: データベース接続情報の登録・編集を行うフォーム画面の設計

**主要機能**:
- 基本情報入力(接続名、環境、テーマカラー)
- データベース設定(種別、ホスト、ポート、データベース名)
- 認証情報入力(ユーザー名、パスワード)
- 詳細設定(SSL、SSHトンネル、タイムアウト)
- バリデーション

**工数**: 2日

---

### 1.3.4 接続CRUD機能実装(Rust)

**ファイル**: [1.3.4_connection_crud_design.md](./1.3.4_connection_crud_design.md)

**概要**: Rustバックエンドで接続情報のCRUD操作を実装

**主要モジュール**:
- `models/connection.rs` - データモデル定義
- `storage/connection_storage.rs` - ストレージ層
- `services/connection_service.rs` - ビジネスロジック
- `commands/connection.rs` - Tauriコマンド

**主要機能**:
- 接続の作成・読み込み・更新・削除
- パスワード暗号化
- JSONファイルベースの永続化
- トランザクション的な操作

**工数**: 3日

---

### 1.3.5 フロントエンド接続管理Store実装

**ファイル**: [1.3.5_connection_store_design.md](./1.3.5_connection_store_design.md)

**概要**: Piniaを使用した接続情報の状態管理

**主要機能**:
- 接続リストの管理
- フィルタリング・ソート
- Tauriコマンドとの連携
- エラーハンドリング
- ローカルキャッシュ

**工数**: 1日

---

### 1.3.6 Tauri IPC通信実装

**ファイル**: [1.3.6_tauri_ipc_design.md](./1.3.6_tauri_ipc_design.md)

**概要**: フロントエンド(Vue/TypeScript)とバックエンド(Rust)間のIPC通信設計

**主要機能**:
- 型安全なAPI定義
- エラーハンドリング
- ログ出力
- モック・テスト対応

**ファイル**:
- `src/api/connection.ts` - フロントエンドAPIクライアント
- `src-tauri/src/commands/connection.rs` - バックエンドコマンド

**工数**: 2日

---

### 1.3.7 接続テスト機能実装

**ファイル**: [1.3.7_connection_test_design.md](./1.3.7_connection_test_design.md)

**概要**: データベース接続設定の検証機能

**主要機能**:
- PostgreSQL/MySQL/SQLite接続テスト
- タイムアウト処理
- サーバー情報取得
- エラー詳細表示
- トラブルシューティングガイド

**工数**: 1日

---

### 1.3.8 検索・フィルター機能実装

**ファイル**: [1.3.8_search_filter_design.md](./1.3.8_search_filter_design.md)

**概要**: 接続リストの検索・フィルタリング機能

**主要機能**:
- テキスト検索(接続名、ホスト名、データベース名)
- 環境別フィルター
- データベース種別フィルター
- ソート機能(名前/最終使用/環境/作成日時)
- デバウンス処理
- キーボードショートカット

**工数**: 1日

---

## 📋 WBS 1.4: 環境別テーマシステム 設計書一覧

### 1.4.1 Vuetifyテーマ定義作成

**ファイル**: [1.4.1_vuetify_theme_definition.md](./1.4.1_vuetify_theme_definition.md)

**概要**: データベース接続の環境を視覚的に区別するためのVuetify 3.xテーマ定義

**主要機能**:
- 4環境(開発・テスト・ステージング・本番)のテーマ定義
- カラーパレットの設計
- アクセシビリティ対応(WCAG 2.1 AA基準)
- カラーユニバーサルデザイン

**工数**: 1日

---

### 1.4.2 テーマ切り替え機能実装

**ファイル**: [1.4.2_theme_switcher.md](./1.4.2_theme_switcher.md)

**概要**: 接続先の環境に応じて動的にテーマを切り替える機能

**主要機能**:
- Vuetifyテーマの動的切り替え
- ウィンドウ別テーマ管理
- Tauri連携によるウィンドウラベル管理
- テーマ切り替えトランジション

**主要モジュール**:
- `src/composables/useTheme.ts` - テーマ切り替えコンポーザブル
- `src-tauri/src/commands/window.rs` - ウィンドウ管理コマンド

**工数**: 1日

---

### 1.4.3 環境色設定UI実装

**ファイル**: [1.4.3_environment_color_settings_ui.md](./1.4.3_environment_color_settings_ui.md)

**概要**: 接続設定フォームでの環境タイプと環境色選択UI

**主要コンポーネント**:
- EnvironmentSelector.vue - 環境タイプ選択
- EnvironmentColorPreview.vue - カラープレビュー
- ConnectionForm.vue への統合

**主要機能**:
- 環境タイプ選択(ラジオボタン)
- テーマカラーのリアルタイムプレビュー
- バリデーション
- カスタムカラー設定(将来拡張)

**工数**: 1日

---

### 1.4.4 環境識別ヘッダーコンポーネント

**ファイル**: [1.4.4_environment_header_component.md](./1.4.4_environment_header_component.md)

**概要**: クエリビルダー画面の環境識別ヘッダー

**主要コンポーネント**:
- EnvironmentHeader.vue - メインヘッダー
- EnvironmentBadge.vue - 環境バッジ

**主要機能**:
- 環境情報の表示(アイコン、色、ラベル)
- 本番環境の警告バナー
- 接続ステータス表示
- アニメーション効果

**工数**: 1日

---

### 1.4.5 テーマStore実装

**ファイル**: [1.4.5_theme_store.md](./1.4.5_theme_store.md)

**概要**: Piniaを使用したテーマの状態管理

**主要機能**:
- テーマ状態管理
- ウィンドウ別テーマ管理
- テーマ設定の永続化(localStorage)
- ユーザー設定管理

**ファイル**:
- `src/stores/theme.ts` - テーマストア
- `src/composables/useTheme.ts` - テーマコンポーザブル(拡張)

**工数**: 0.5日

---

### 1.4.6 テーマプレビュー機能

**ファイル**: [1.4.6_theme_preview.md](./1.4.6_theme_preview.md)

**概要**: 接続設定画面でのテーマプレビュー機能

**主要コンポーネント**:
- ThemePreview.vue - テーマプレビュー
- ThemeComparisonView.vue - 複数テーマ比較(オプション)

**主要機能**:
- リアルタイムプレビュー
- UIコンポーネントサンプル表示
- カラーパレット表示
- インタラクティブプレビュー

**工数**: 0.5日

---

## 📊 進捗管理

### 設計完了状況

| タスクID | タスク名 | 設計書 | ステータス |
|---------|---------|--------|-----------|
| 1.2.1 | ファイルストレージモジュール実装 | ✅ | 完了 |
| 1.2.2 | 暗号化ユーティリティ実装 | ✅ | 完了 |
| 1.2.3 | マスターキー管理実装 | ✅ | 完了 |
| 1.2.4 | 接続情報データモデル定義 | ✅ | 完了 |
| 1.2.5 | データ永続化層のテスト作成 | ✅ | 完了 |
| 1.3.1 | 起動画面(ランチャー)UI実装 | ✅ | 完了 |
| 1.3.2 | 接続カードコンポーネント作成 | ✅ | 完了 |
| 1.3.3 | 接続設定フォームUI実装 | ✅ | 完了 |
| 1.3.4 | 接続CRUD機能実装(Rust) | ✅ | 完了 |
| 1.3.5 | フロントエンド接続管理Store実装 | ✅ | 完了 |
| 1.3.6 | Tauri IPC通信実装 | ✅ | 完了 |
| 1.3.7 | 接続テスト機能実装 | ✅ | 完了 |
| 1.3.8 | 検索・フィルター機能実装 | ✅ | 完了 |
| 1.4.1 | Vuetifyテーマ定義作成 | ✅ | 完了 |
| 1.4.2 | テーマ切り替え機能実装 | ✅ | 完了 |
| 1.4.3 | 環境色設定UI実装 | ✅ | 完了 |
| 1.4.4 | 環境識別ヘッダーコンポーネント | ✅ | 完了 |
| 1.4.5 | テーマStore実装 | ✅ | 完了 |
| 1.4.6 | テーマプレビュー機能 | ✅ | 完了 |

**フェーズ1 合計工数**: 20.5日 (1.2系: 5.5日 + 1.3系: 13日 + 1.4系: 5日)

---

## 🎯 実装順序

設計書に基づいた推奨実装順序:

### フェーズ1: 基本機能実装

#### ステップ1: データ永続化層 (1.2系)
   - 1.2.1 ファイルストレージモジュール
   - 1.2.2 暗号化ユーティリティ
   - 1.2.3 マスターキー管理
   - 1.2.4 接続情報データモデル
   - 1.2.5 データ永続化層テスト

#### ステップ2: バックエンド基盤 (1.3系)
   - 1.3.4 接続CRUD機能実装(Rust)
   - 1.3.6 Tauri IPC通信実装

#### ステップ3: フロントエンド状態管理 (1.3系 + 1.4系)
   - 1.3.5 フロントエンド接続管理Store実装
   - 1.4.5 テーマStore実装

#### ステップ4: テーマシステム基盤 (1.4系)
   - 1.4.1 Vuetifyテーマ定義作成
   - 1.4.2 テーマ切り替え機能実装

#### ステップ5: UI実装 (1.3系 + 1.4系)
   - 1.4.4 環境識別ヘッダーコンポーネント
   - 1.3.1 起動画面(ランチャー)UI実装
   - 1.3.2 接続カードコンポーネント作成
   - 1.3.3 接続設定フォームUI実装
   - 1.4.3 環境色設定UI実装
   - 1.4.6 テーマプレビュー機能

#### ステップ6: 機能拡張 (1.3系)
   - 1.3.8 検索・フィルター機能実装
   - 1.3.7 接続テスト機能実装

---

## 🔗 関連ドキュメント

- [要件定義書・概要設計書](../sql_editor_requirements_md.md)
- [WBS](../sql_editor_wbs.md)
- [プロジェクトルートREADME](../../README.md)
- [CLAUDE.md](../../CLAUDE.md) - 開発コマンドとアーキテクチャ概要

---

## 📝 設計書フォーマット

各設計書は以下の構成で記載されています:

1. **概要**
   - タスクID、タスク名、工数、依存関係、完了条件

2. **目的**
   - 実装する機能の目的と背景

3. **設計内容**
   - データモデル
   - コンポーネント設計
   - API設計
   - 画面設計

4. **実装詳細**
   - コード例
   - ファイル構成
   - 依存関係

5. **テスト**
   - ユニットテスト
   - E2Eテスト
   - テスト観点

6. **実装チェックリスト**
   - 実装時の確認項目

---

## 🚀 次のステップ

1. **設計レビュー**: 各設計書のレビューとフィードバック反映
2. **実装開始**: 推奨実装順序に従って開発開始
3. **進捗管理**: WBSと照らし合わせて進捗を追跡
4. **テスト**: 各タスク完了時に設計書のチェックリストで確認

---

## 📞 お問い合わせ

設計に関する質問や提案は、プロジェクトの Issue トラッカーまでお願いします。

---

**最終更新日**: 2025-11-03
**作成者**: Claude Code
