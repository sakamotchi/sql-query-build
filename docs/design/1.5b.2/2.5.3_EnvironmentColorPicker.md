# タスク1.5b.2.5.3: EnvironmentColorPicker.vue作成

**サブフェーズ**: 2.5 接続フォームページ
**工数**: 2.5時間
**優先度**: 中
**依存関係**: 2.1.3 (型定義)

---

## 目的

カスタムカラーピッカーコンポーネントを実装（環境カラーのカスタマイズ用）

---

## 実装内容

### ファイル作成: `app/components/connection/EnvironmentColorPicker.vue`

```vue
<script setup lang="ts">
const primaryColor = defineModel<string>('primaryColor', { default: '#4CAF50' })
const backgroundColor = defineModel<string>('backgroundColor', { default: '#F1F8E9' })

/**
 * プリセットカラー
 */
const presetColors = [
  { primary: '#4CAF50', bg: '#F1F8E9', name: '緑' },
  { primary: '#2196F3', bg: '#E3F2FD', name: '青' },
  { primary: '#FF9800', bg: '#FFF3E0', name: 'オレンジ' },
  { primary: '#F44336', bg: '#FFEBEE', name: '赤' },
  { primary: '#9C27B0', bg: '#F3E5F5', name: '紫' },
  { primary: '#795548', bg: '#EFEBE9', name: '茶色' }
]

/**
 * プリセットカラーを適用
 */
const applyPreset = (preset: { primary: string; bg: string }) => {
  primaryColor.value = preset.primary
  backgroundColor.value = preset.bg
}

/**
 * デフォルトカラーにリセット
 */
const resetToDefault = () => {
  primaryColor.value = '#4CAF50'
  backgroundColor.value = '#F1F8E9'
}
</script>

<template>
  <div class="space-y-4">
    <!-- プリセットカラー -->
    <div>
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block">
        プリセットカラー
      </label>
      <div class="flex flex-wrap gap-2">
        <button
          v-for="preset in presetColors"
          :key="preset.name"
          type="button"
          class="group relative w-12 h-12 rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 transition-all overflow-hidden"
          :title="preset.name"
          @click="applyPreset(preset)"
        >
          <div class="absolute inset-0 flex">
            <div
              class="w-1/2"
              :style="{ backgroundColor: preset.primary }"
            />
            <div
              class="w-1/2"
              :style="{ backgroundColor: preset.bg }"
            />
          </div>
        </button>
      </div>
    </div>

    <!-- カスタムカラー選択 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- プライマリカラー -->
      <UFormGroup label="プライマリカラー">
        <div class="flex gap-2">
          <input
            v-model="primaryColor"
            type="color"
            class="w-12 h-10 rounded cursor-pointer border border-gray-300 dark:border-gray-600"
          >
          <UInput
            v-model="primaryColor"
            placeholder="#4CAF50"
            class="flex-1"
          />
        </div>
      </UFormGroup>

      <!-- 背景カラー -->
      <UFormGroup label="背景カラー">
        <div class="flex gap-2">
          <input
            v-model="backgroundColor"
            type="color"
            class="w-12 h-10 rounded cursor-pointer border border-gray-300 dark:border-gray-600"
          >
          <UInput
            v-model="backgroundColor"
            placeholder="#F1F8E9"
            class="flex-1"
          />
        </div>
      </UFormGroup>
    </div>

    <!-- プレビュー -->
    <div>
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block">
        プレビュー
      </label>
      <div
        class="p-4 rounded-lg border-4 transition-all"
        :style="{
          backgroundColor: backgroundColor,
          borderColor: primaryColor
        }"
      >
        <p
          class="font-semibold"
          :style="{ color: primaryColor }"
        >
          サンプルテキスト
        </p>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
          この色が環境ヘッダーに適用されます
        </p>
      </div>
    </div>

    <!-- リセットボタン -->
    <div class="flex justify-end">
      <UButton
        variant="outline"
        color="gray"
        @click="resetToDefault"
      >
        デフォルトに戻す
      </UButton>
    </div>
  </div>
</template>
```

---

## 確認事項

- [ ] コンポーネントが作成されたか
- [ ] カラーピッカーが動作するか
- [ ] プリセットカラーが適用できるか
- [ ] プレビューが正しく表示されるか
- [ ] リセット機能が動作するか
- [ ] v-modelが正しく機能するか

---

## 成果物

- `app/components/connection/EnvironmentColorPicker.vue`

---

## Model定義

| Model | 型 | デフォルト | 説明 |
|-------|---|-----------|------|
| `primaryColor` | `string` | `'#4CAF50'` | プライマリカラー |
| `backgroundColor` | `string` | `'#F1F8E9'` | 背景カラー |

---

## プリセットカラー

| 名前 | プライマリ | 背景 |
|------|-----------|------|
| 緑 | #4CAF50 | #F1F8E9 |
| 青 | #2196F3 | #E3F2FD |
| オレンジ | #FF9800 | #FFF3E0 |
| 赤 | #F44336 | #FFEBEE |
| 紫 | #9C27B0 | #F3E5F5 |
| 茶色 | #795548 | #EFEBE9 |

---

## 機能

### 1. プリセットカラー選択
- 6つのプリセットから選択
- ボタンで一括適用

### 2. カスタムカラー選択
- HTML5カラーピッカー
- テキスト入力（HEXコード）

### 3. プレビュー
- 選択したカラーをリアルタイム表示
- 環境ヘッダーのイメージを確認

### 4. リセット機能
- デフォルトカラーに戻す

---

## 使用例

```vue
<EnvironmentColorPicker
  v-model:primary-color="form.customColor.primary"
  v-model:background-color="form.customColor.background"
/>
```

---

## デザイン要件

- プリセットボタンは分割表示（左:プライマリ、右:背景）
- カラーピッカーとテキスト入力を並列配置
- プレビューで視覚的確認

---

## 次のタスク

→ [2.5.4: ThemePreview.vue作成](2.5.4_ThemePreview.md)
